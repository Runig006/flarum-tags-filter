(()=>{var t={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const o=flarum.core.compat["common/extend"],n=flarum.core.compat["forum/app"];var r=t.n(n);const a=flarum.core.compat["forum/components/IndexPage"];var s=t.n(a);function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}const c=flarum.core.compat["common/Component"];var l=t.n(c);const u=flarum.core.compat["common/components/Button"];var p=t.n(u);const d=flarum.core.compat["common/components/Dropdown"];var f=t.n(d),g=function(t){var e,o;function n(){return t.apply(this,arguments)||this}o=t,(e=n).prototype=Object.create(o.prototype),e.prototype.constructor=e,i(e,o);var a=n.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e);var o,n,a=localStorage.getItem("spy-tags-filters");n=a?JSON.parse(a):[],this.state={data:(o=r().store.all("tags"),o.slice(0).sort((function(t,e){var o=t.position(),n=e.position();if(null===o&&null===n)return e.discussionCount()-t.discussionCount();if(null===n)return-1;if(null===o)return 1;var r=t.parent(),a=e.parent();return r===a?o-n:r&&a?r.position()-a.position():r?r===e?1:r.position()-n:a?a===t?-1:o-a.position():0}))),selected:n}},a.view=function(){var t,e=this,o=null==(t=this.state.data)?void 0:t.map((function(t){return m(p(),{className:"TagFilter-item Button "+(e.state.selected.indexOf(t.slug())>=0?"active":""),onclick:function(){e.handleTagChange(t)}},t.name())}));return m(f(),{buttonClassName:"Button",label:"Tags",updateOnClose:!0},o)},a.handleTagChange=function(t){var e=r().search.params(),o=this.state.selected.indexOf(t.slug());o>=0?this.state.selected.splice(o,1):this.state.selected.push(t.slug()),localStorage.setItem("spy-tags-filters",JSON.stringify(this.state.selected)),e.tags=this.state.selected.join(","),r().discussions.refreshParams(e,2)},n}(l());r().initializers.add("runig006/user-filter",(function(){(0,o.extend)(s().prototype,"viewItems",(function(t){-1!=["index","following"].indexOf(r().current.data.routeName)&&t.add("tagFilter",m(g,null),-15)}))}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map